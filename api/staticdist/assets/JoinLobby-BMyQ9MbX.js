import{u,a as g,o as y,b,t as $,i}from"./index-DM15i1R1.js";var f=$("<div><h2>Connected to Lobby</h2><p>Code: <strong></strong></p><p>Name: </p><p>Players: <span id=players>(connecting...)");function C(){const c=u(),p=g(),a=c.code,r=new URLSearchParams(p.search).get("name")||"anon";let n=null;function d(){return`${location.protocol==="https:"?"wss":"ws"}://${location.host}/api/v1/ws/${a}?name=${encodeURIComponent(r)}`}return y(()=>{n=new WebSocket(d()),n.onmessage=e=>{try{const t=JSON.parse(e.data);if(t.type==="lobby_state"){const o=t.players||[],s=document.getElementById("players");s&&(s.textContent=String(o.join(", ")))}}catch(t){console.error(t)}}}),b(()=>{n&&n.close()}),(()=>{var e=f(),t=e.firstChild,o=t.nextSibling,s=o.firstChild,m=s.nextSibling,l=o.nextSibling;return l.firstChild,e.style.setProperty("padding","24px"),i(m,a),i(l,r,null),e})()}export{C as default};
