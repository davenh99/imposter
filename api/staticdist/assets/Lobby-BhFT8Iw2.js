import{u as b,a as f,o as S,b as _,t as h,i as c,d as x}from"./index-DM15i1R1.js";var C=h("<div><h2>Lobby</h2><p>Code: <strong></strong></p><p>Player: </p><p>Players: <span id=players>(connecting...)</span></p><div><button>Start Game");function w(){const p=b(),d=f(),r=p.code,l=new URLSearchParams(d.search).get("name")||"anon";let t=null;function m(){return`${location.protocol==="https:"?"wss":"ws"}://${location.host}/api/v1/ws/${r}?name=${encodeURIComponent(l)}`}function y(){t&&t.readyState===WebSocket.OPEN&&t.send(JSON.stringify({type:"start"}))}return S(()=>{t=new WebSocket(m()),t.onmessage=n=>{try{const e=JSON.parse(n.data);if(e.type==="lobby_state"){const s=e.players||[],o=document.getElementById("players");o&&(o.textContent=String(s.join(", ")))}e.type==="start_game"&&alert("Game started!")}catch(e){console.error(e)}}}),_(()=>{t&&t.close()}),(()=>{var n=C(),e=n.firstChild,s=e.nextSibling,o=s.firstChild,g=o.nextSibling,a=s.nextSibling;a.firstChild;var u=a.nextSibling,i=u.nextSibling,$=i.firstChild;return n.style.setProperty("padding","24px"),c(g,r),c(a,l,null),i.style.setProperty("margin-top","12px"),$.$$click=y,n})()}x(["click"]);export{w as default};
