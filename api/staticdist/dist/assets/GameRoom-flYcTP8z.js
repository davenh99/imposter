import{u as _,a as k,c,o as G,b as S,t as r,i as l,m as d,d as C}from"./index-B6XitvtW.js";import{g as W,G as R,a as U}from"./api-cUllnaIb.js";var E=r('<div class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-gray-800 mb-2">Game'),I=r('<div class="text-center text-gray-500 py-8"><p>Loading game...'),L=r('<div class=text-center><div class="text-6xl font-bold text-red-600 mb-4">ðŸŽ­</div><h3 class="text-2xl font-bold text-gray-800 mb-4">You are the Imposter!</h3><p class="text-gray-600 mb-8">Your goal is to figure out what the word is by asking questions and listening to the other players.'),N=r(`<div class=text-center><div class="text-6xl font-bold text-green-600 mb-4">âœ“</div><h3 class="text-xl font-bold text-gray-800 mb-4">The Word Is:</h3><div class="bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-8 mb-8"><p class="text-4xl font-bold text-blue-600"></p></div><p class=text-gray-600>Don't let the imposter figure this out!`);function q(){const m=_(),s=k(),a=m.code,[n,u]=c(null),[g,b]=c(null),p=W();let o=null;function x(){return U(`/api/v1/ws/${a}`)}function f(){s("/")}return G(async()=>{try{if(!(await fetch(`${p}/api/v1/lobbies/${a}`)).ok){console.error("Lobby not found, redirecting to home"),s("/");return}}catch(t){console.error("Error checking lobby:",t),s("/");return}o=new WebSocket(x()),o.onmessage=t=>{try{const e=JSON.parse(t.data);console.log("GameRoom received message:",e),e.type==="game_started"&&(console.log("Game started, role:",e.role,"word:",e.word),u(e.role),e.role==="word"&&b(e.word))}catch(e){console.error("WebSocket message error:",e)}},o.onerror=t=>{console.error("WebSocket error in GameRoom:",t)},o.onclose=()=>{console.log("WebSocket closed in GameRoom")}}),S(()=>{o&&o.close()}),(()=>{var t=E(),e=t.firstChild;return e.firstChild,l(e,(()=>{var h=d(()=>n()===null);return()=>h()?I():d(()=>n()==="imposter")()?L():(()=>{var i=N(),v=i.firstChild,w=v.nextSibling,y=w.nextSibling,$=y.firstChild;return l($,g),i})()})(),null),l(e,C(R,{onClick:f,class:"w-full",children:"End Game"}),null),t})()}export{q as default};
