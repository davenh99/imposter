import{u as J,k as W,a as j,c as d,o as G,b as N,t as l,i as a,m as O,d as U}from"./index-BTanLXH3.js";import{G as B}from"./GameButton-CA8QE9Va.js";var E=l('<div class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-gray-800 mb-2">Joined Lobby</h2><p class="text-gray-500 text-sm">Waiting for the host to start the game...</p></div><div class="bg-gray-100 rounded-lg p-6 mb-6"><p class="text-gray-600 text-sm mb-2">Lobby Code:</p><p class="text-3xl font-bold text-purple-600 text-center tracking-wider"></p></div><div class=mb-6><p class="text-gray-700 font-semibold mb-3">Players in lobby: <span class=text-purple-600></span></p><div class="space-y-2 min-h-12"></div></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"><p class="text-blue-700 text-sm">âœ“ Successfully joined the lobby. Waiting for the game to start...'),I=l('<span class="text-gray-400 text-sm">Connecting...'),M=l('<span class="inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium mr-2">');function z(){const g=J(),u=W(),n=j(),r=g.code,f=new URLSearchParams(u.search).get("name")||"Player",[o,y]=d([]),[i,x]=d(!1);let e=null;function h(){return`${location.protocol==="https:"?"wss":"ws"}://${location.host}/api/v1/ws/${r}`}function v(){x(!0),e&&e.close(),n("/")}return G(async()=>{try{if(!(await fetch(`/api/v1/lobbies/${r}`)).ok){console.error("Lobby not found, redirecting to home"),n("/");return}}catch(t){console.error("Error checking lobby:",t),n("/");return}e=new WebSocket(h()),e.onmessage=t=>{try{const s=JSON.parse(t.data);s.type==="lobby_state"&&y(s.players||[]),s.type==="game_started"&&(console.log("Game started, navigating to game room"),n(`/game/${r}`))}catch(s){console.error("WebSocket message error:",s)}},e.onopen=()=>{e?.send(JSON.stringify({type:"join",name:f}))}}),N(()=>{e&&e.close()}),(()=>{var t=E(),s=t.firstChild,$=s.firstChild,c=$.nextSibling,_=c.firstChild,w=_.nextSibling,b=c.nextSibling,p=b.firstChild,S=p.firstChild,L=S.nextSibling,C=p.nextSibling;return b.nextSibling,a(w,r),a(L,()=>o().length),a(C,(()=>{var k=O(()=>o().length===0);return()=>k()?I():o().map(P=>(()=>{var m=M();return a(m,P),m})())})()),a(s,U(B,{onClick:v,get disabled(){return i()},variant:"secondary",class:"w-full",get children(){return i()?"Leaving...":"Leave Lobby"}}),null),t})()}export{z as default};
