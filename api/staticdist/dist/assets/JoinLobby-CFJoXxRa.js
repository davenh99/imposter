import{u as w,a as S,c as C,o as k,b as W,t as n,i as l,m as P}from"./index-2AqZPfgG.js";var j=n('<div class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-gray-800 mb-2">Connected</h2><p class="text-gray-500 text-sm">Waiting for the host to start...</p></div><div class="bg-gray-100 rounded-lg p-6 mb-6"><p class="text-gray-600 text-sm mb-2">Lobby Code:</p><p class="text-3xl font-bold text-purple-600 text-center tracking-wider"></p></div><div class=mb-6><p class="text-gray-700 font-semibold mb-3">Players in lobby: <span class=text-purple-600></span></p><div class="space-y-2 min-h-12"></div></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><p class="text-blue-700 text-sm">âœ“ Successfully joined the lobby. Waiting for the game to start...'),J=n('<span class="text-gray-400 text-sm">Connecting...'),L=n('<span class="inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium mr-2">');function G(){const p=w(),d=S(),a=p.code,[r,m]=C([]);let s=null;function b(){return`${location.protocol==="https:"?"wss":"ws"}://${location.host}/api/v1/ws/${a}`}return k(()=>{s=new WebSocket(b()),s.onmessage=t=>{try{const e=JSON.parse(t.data);e.type==="lobby_state"&&m(e.players||[]),e.type==="game_started"&&(console.log("Game started, navigating to game room"),d(`/game/${a}`))}catch(e){console.error("WebSocket message error:",e)}}}),W(()=>{s&&s.close()}),(()=>{var t=j(),e=t.firstChild,g=e.firstChild,o=g.nextSibling,u=o.firstChild,x=u.nextSibling,f=o.nextSibling,i=f.firstChild,y=i.firstChild,h=y.nextSibling,v=i.nextSibling;return l(x,a),l(h,()=>r().length),l(v,(()=>{var $=P(()=>r().length===0);return()=>$()?J():r().map(_=>(()=>{var c=L();return l(c,_),c})())})()),t})()}export{G as default};
