import{u as P,k as j,a as J,c as g,o as G,b as N,t as a,i as o,m as U,d as O}from"./index-sbeJfB4X.js";import{G as R}from"./GameButton-Cp6aSs8n.js";var B=a('<div class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-gray-800 mb-2">Joined Lobby</h2><p class="text-gray-500 text-sm">Waiting for the host to start the game...</p></div><div class="bg-gray-100 rounded-lg p-6 mb-6"><p class="text-gray-600 text-sm mb-2">Lobby Code:</p><p class="text-3xl font-bold text-purple-600 text-center tracking-wider"></p></div><div class=mb-6><p class="text-gray-700 font-semibold mb-3">Players in lobby: <span class=text-purple-600></span></p><div class="space-y-2 min-h-12"></div></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"><p class="text-blue-700 text-sm">âœ“ Successfully joined the lobby. Waiting for the game to start...'),E=a('<span class="text-gray-400 text-sm">Connecting...'),I=a('<span class="inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium mr-2">');function z(){const m=P(),u=j(),n=J(),r=m.code,y=new URLSearchParams(u.search).get("name")||"Player",[l,f]=g([]),[i,x]=g(!1);let e=null;function h(){return`${location.protocol==="https:"?"wss":"ws"}://${location.host}/api/v1/ws/${r}`}function v(){x(!0),e&&e.close(),n("/")}return G(async()=>{try{if(!(await fetch(`/api/v1/lobbies/${r}`)).ok){console.error("Lobby not found, redirecting to home"),n("/");return}}catch(t){console.error("Error checking lobby:",t),n("/");return}e=new WebSocket(h()),e.onopen=()=>{console.log("WebSocket opened, sending join message"),e?.send(JSON.stringify({type:"join",name:y}))},e.onmessage=t=>{try{const s=JSON.parse(t.data);console.log("Received message:",s),s.type==="lobby_state"&&(console.log("Updating players:",s.players),f(s.players||[])),s.type==="game_started"&&(console.log("Game started, navigating to game room"),n(`/game/${r}`))}catch(s){console.error("WebSocket message error:",s)}},e.onerror=t=>{console.error("WebSocket error:",t)},e.onclose=()=>{console.log("WebSocket closed")}}),N(()=>{e&&e.close()}),(()=>{var t=B(),s=t.firstChild,$=s.firstChild,c=$.nextSibling,_=c.firstChild,S=_.nextSibling,p=c.nextSibling,b=p.firstChild,w=b.firstChild,k=w.nextSibling,L=b.nextSibling;return p.nextSibling,o(S,r),o(k,()=>l().length),o(L,(()=>{var C=U(()=>l().length===0);return()=>C()?E():l().map(W=>(()=>{var d=I();return o(d,W),d})())})()),o(s,O(R,{onClick:v,get disabled(){return i()},variant:"secondary",class:"w-full",get children(){return i()?"Leaving...":"Leave Lobby"}}),null),t})()}export{z as default};
