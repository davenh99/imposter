import{u as S,k as G,a as W,c,o as C,b as R,t as r,i as l,m as d,d as U}from"./index-BTLCJJPZ.js";import{g as L,G as j,a as N}from"./api-C1UlGYdT.js";var P=r('<div class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-gray-800 mb-2">Game'),E=r('<div class="text-center text-gray-500 py-8"><p>Loading game...'),I=r('<div class=text-center><div class="text-6xl font-bold text-red-600 mb-4">ðŸŽ­</div><h3 class="text-2xl font-bold text-gray-800 mb-4">You are the Imposter!</h3><p class="text-gray-600 mb-8">Your goal is to figure out what the word is by asking questions and listening to the other players.'),J=r(`<div class=text-center><div class="text-6xl font-bold text-green-600 mb-4">âœ“</div><h3 class="text-xl font-bold text-gray-800 mb-4">The Word Is:</h3><div class="bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-8 mb-8"><p class="text-4xl font-bold text-blue-600"></p></div><p class=text-gray-600>Don't let the imposter figure this out!`);function q(){const m=S(),g=G(),s=W(),n=m.code,u=new URLSearchParams(g.search).get("name")||"Player",[a,p]=c(null),[b,x]=c(null),f=L();let o=null;function h(){return N(`/api/v1/ws/${n}`)}function v(){s("/")}return C(async()=>{try{if(!(await fetch(`${f}/api/v1/lobbies/${n}`)).ok){console.error("Lobby not found, redirecting to home"),s("/");return}}catch(t){console.error("Error checking lobby:",t),s("/");return}o=new WebSocket(h()),o.onopen=()=>{console.log("GameRoom WebSocket opened, sending join message"),o?.send(JSON.stringify({type:"join",name:u}))},o.onmessage=t=>{try{const e=JSON.parse(t.data);console.log("GameRoom received message:",e),e.type==="game_started"&&(console.log("Game started, role:",e.role,"word:",e.word),p(e.role),e.role==="word"&&x(e.word))}catch(e){console.error("WebSocket message error:",e)}},o.onerror=t=>{console.error("WebSocket error in GameRoom:",t)},o.onclose=()=>{console.log("WebSocket closed in GameRoom")}}),R(()=>{o&&o.close()}),(()=>{var t=P(),e=t.firstChild;return e.firstChild,l(e,(()=>{var y=d(()=>a()===null);return()=>y()?E():d(()=>a()==="imposter")()?I():(()=>{var i=J(),w=i.firstChild,$=w.nextSibling,_=$.nextSibling,k=_.firstChild;return l(k,b),i})()})(),null),l(e,U(j,{onClick:v,class:"w-full",children:"End Game"}),null),t})()}export{q as default};
