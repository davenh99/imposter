import{f as E,c as n,a as I,t as j,i as o,d as s}from"./index-B6XitvtW.js";import{g as k,G as h}from"./api-cUllnaIb.js";import{G as x}from"./GameInput-DzkOTkNv.js";var J=j('<div class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"><h1 class="text-4xl font-bold text-center mb-2 text-gray-800">Imposter</h1><p class="text-center text-gray-500 mb-8 text-sm">Play the word guessing game</p><div class="flex items-center gap-3 mb-6"><div class="flex-1 h-px bg-gray-300"></div><span class="text-gray-500 text-sm">or</span><div class="flex-1 h-px bg-gray-300"></div></div><div class=space-y-3><h2 class=text-center>Join Lobby</h2><div class="flex space-x-2">');function A(){const[t,v]=E(),[l,C]=n(""),[$,r]=n(""),[d,b]=n(!1),[g,m]=n(!1),u=I(),p=k();async function w(){b(!0);try{const e=await fetch(`${p}/api/v1/lobbies`,{method:"POST"});if(!e.ok){console.error("Failed to create lobby");return}const a=await e.json();console.log("Lobby created with code:",a.code),u(`/lobby/${a.code}`)}catch(e){console.error("Error creating lobby:",e)}finally{b(!1)}}async function P(){if(r(""),!l().trim()){r("Please enter your name");return}if(!t.code?.trim()){r("Please enter a lobby code");return}m(!0);try{if(!(await fetch(`${p}/api/v1/lobbies/${t.code.toLowerCase()}`)).ok){r("Lobby code not found. Please check and try again.");return}console.log("Joining lobby:",t.code),u(`/join/${t.code.toLowerCase()}?name=${encodeURIComponent(l())}`)}catch(e){console.error("Error joining lobby:",e),r("Error joining lobby. Please try again.")}finally{m(!1)}}return(()=>{var e=J(),a=e.firstChild,_=a.firstChild,L=_.nextSibling,f=L.nextSibling,y=f.nextSibling,S=y.firstChild,i=S.nextSibling;return o(a,s(h,{onClick:w,get disabled(){return d()},class:"w-full mb-6",get children(){return d()?"Creating...":"Create Lobby"}}),f),o(y,s(x,{get value(){return l()},onInput:c=>C(c.toUpperCase()),label:"Name",placeholder:"Enter name"}),i),o(i,s(x,{get value(){return t.code||""},onInput:c=>v({code:c.toUpperCase()}),placeholder:"Enter code",get error(){return $()},maxlength:6,class:"flex-2"}),null),o(i,s(h,{class:"w-[40%]",onClick:P,variant:"secondary",get disabled(){return g()},get children(){return g()?"Joining...":"Join"}}),null),e})()}export{A as default};
