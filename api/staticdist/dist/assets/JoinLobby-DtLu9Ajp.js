import{u as W,a as G,c as n,o as O,b as I,t as s,i as a,m as p,d as H,e as M}from"./index-Cu_2uD_n.js";import{G as U}from"./GameInput-XCPjeDVd.js";var Y=s('<div class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"><div class="text-center mb-8"><h2 class="text-3xl font-bold text-gray-800 mb-2">Join Lobby</h2><p class="text-gray-500 text-sm">Enter your name and join the game</p></div><div class="bg-gray-100 rounded-lg p-6 mb-6"><p class="text-gray-600 text-sm mb-2">Lobby Code:</p><p class="text-3xl font-bold text-purple-600 text-center tracking-wider">'),q=s("<div class=mb-6>"),z=s('<div class=mb-6><p class="text-gray-700 font-semibold mb-3">Players in lobby: <span class=text-purple-600></span></p><div class="space-y-2 min-h-12">'),A=s('<span class="text-gray-400 text-sm">Connecting...'),B=s('<span class="inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium mr-2">'),D=s('<button class="w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white font-bold py-3 rounded-lg hover:shadow-lg transition-all duration-200 transform hover:scale-105">Join Lobby'),F=s('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><p class="text-blue-700 text-sm">âœ“ Successfully joined the lobby. Waiting for the game to start...');function R(){const f=W(),y=G(),o=f.code,[i,x]=n(""),[$,u]=n(""),[c,v]=n([]),[d,_]=n(!1);let r=null;function h(){return`${location.protocol==="https:"?"wss":"ws"}://${location.host}/api/v1/ws/${o}`}function w(){if(u(""),!i().trim()){u("Please enter your name");return}r&&r.readyState===WebSocket.OPEN&&(r.send(JSON.stringify({type:"join",name:i()})),_(!0))}return O(()=>{r=new WebSocket(h()),r.onmessage=l=>{try{const e=JSON.parse(l.data);e.type==="lobby_state"&&v(e.players||[]),e.type==="game_started"&&(console.log("Game started, navigating to game room"),y(`/game/${o}`))}catch(e){console.error("WebSocket message error:",e)}}}),I(()=>{r&&r.close()}),(()=>{var l=Y(),e=l.firstChild,S=e.firstChild,k=S.nextSibling,C=k.firstChild,J=C.nextSibling;return a(J,o),a(e,(()=>{var m=p(()=>!d());return()=>m()?(()=>{var t=q();return a(t,H(U,{get value(){return i()},onInput:x,label:"Your Name",placeholder:"Enter your name",get error(){return $()}})),t})():(()=>{var t=z(),b=t.firstChild,N=b.firstChild,E=N.nextSibling,j=b.nextSibling;return a(E,()=>c().length),a(j,(()=>{var L=p(()=>c().length===0);return()=>L()?A():c().map(P=>(()=>{var g=B();return a(g,P),g})())})()),t})()})(),null),a(e,(()=>{var m=p(()=>!d());return()=>m()?(()=>{var t=D();return t.$$click=w,t})():F()})(),null),l})()}M(["click"]);export{R as default};
